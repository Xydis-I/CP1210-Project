<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Trivia Dungeon</title>
    <link rel="icon" href="../sprites/Enemies/Mimic.png">
    <link rel="stylesheet" href="../stylesheets/gameOutcome.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jacquard+12&display=swap" rel="stylesheet">
    <audio loop> 
      <source src="../Audio/gameWin.mp3" type="audio/mp3">
    </audio>
</head>
<body>
    <main>
      <div id="box">
        <h1 id="win">You Win!</h1>
        <p>Congratulation! You have successfully escape the Trivia Dungeon!</p>
        <h2>Stats</h2>
        <div id="stats">
          random stuff
        </div>
        <br>
        <button id="return" onclick={returnTitle()}>Return To Title Screens</button>
      </div>
    </main>
    <script>
      const returnTitle = () => {
        location.replace(location.pathname = '../index.html');
        }
        document.addEventListener("DOMContentLoaded", () =>{
            const $ = selector => document.querySelector(selector);
            $("audio").volume = 0.05;
            $("audio").play();

            const levelTimes = sessionStorage.getItem("level_times").split(",");
            const wrongAnswers = sessionStorage.getItem("wrong_answers").split(",");

            let totalScore = 0;

            for (let index = 0; index < 10; index++) {
              totalScore += levelTimes[index] * (4 - wrongAnswers[index]);
            }

            $("#stats").textContent = `Score: ${Math.floor(totalScore)}`;
        });
    </script>   
</body>
</html>